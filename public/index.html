<!doctype html>
<html>
<head>
    <title>IMAGE | BOARD</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <h1 style="display:flex;justify-content: center;">IMAGE | BOARD</h1>

    <!-- ---------------------BEGIN MAIN--------------------- -->
    <div id="main">
            <form id="input-bar">
                <input v-model="title" autocomplete="off" type="text" name="title" placeholder="title">
                <input v-model="description" autocomplete="off" type="text" name="description" placeholder="description">
                <input v-model="username" autocomplete="off" type="text" name="username" placeholder="username">
                <input type="file" name="file" id="file" accept ="image/*" class="inputfile" @change='handleChange'>
                <label for="file">Choose a file</label> 
                <button class="button" @click="handleClick">Submit</button>
            </form>

            <image-modal v-if="selectedImage"
                     :id="selectedImage" @close="closeModal">
            </image-modal>

            <div id="images">
                <div v-for="image in images" class="image-container">
                    <a :href="'#' + image.id">
                        <img :src="image.url" class="image">
                        <figcaption class="caption">{{ image.title }}</figcaption>
                    </a>
                </div>
            </div>
    </div>
    <!----------------------- END MAIN--------------------- -->
    



    <!----------------------- BEGIN MODAL TEMPLATE  ----------------------->
        <script id="template" type="text/x-template">
            <div id="overlay">
            <div id= "modal-container">
                <div id="modal-picture-info">
                <p id="x" @click="closeModal">X</p>
                <h3>Title: {{image.title}}</h3>
                <p> {{image.description}}</p>
                <img :src="image.url" id="modal-image" :alt="image.description" height="500" >
                <p> Uploaded by {{image.username}} at {{image.created_at}}</p>
                </div>
                        
                <div id="modal-comment-info">
                <form>
                    <h4>Add a comment</h4>
                    <input v-model='comment' size="40" id="comment-box" type="text" name='comment' placeholder="Comment">
                    <input v-model='commenter' type="text" name="commenter" placeholder="Your username">
                    <button @click='addComment'>Post New Comment</button>
                </form>

                <div class="comment" v-if="comments.length > 0" v-for='comment in comments'>
                    <div class="comment-header"> {{comment.commenter}} â€” {{comment.created_at}} </div>
                    <div class="comment-content">{{comment.comment}} </div>
                </div>
                </div>
            </div>
            </div>
        </script>
    <!----------------------- END MODAL TEMPLATE  ----------------------->


    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>